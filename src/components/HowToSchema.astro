---
// Reusable HowTo Schema component for tutorial/guide posts
// Usage: <HowToSchema 
//   name="How to..."
//   description="..."
//   steps={[{ name: "...", text: "...", image?: "..." }]}
//   totalTime="PT30M"
// />

interface HowToStep {
  name: string
  text: string
  image?: string
  url?: string
}

interface Props {
  name: string
  description: string
  steps: HowToStep[]
  totalTime?: string // ISO 8601 duration format (e.g., "PT30M" for 30 minutes)
  image?: string
}

const { name, description, steps, totalTime, image } = Astro.props

if (!steps || steps.length === 0) {
  return null
}

const howToSchema = {
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": name,
  "description": description,
  ...(image && {
    "image": image
  }),
  ...(totalTime && {
    "totalTime": totalTime
  }),
  "step": steps.map((step, index) => ({
    "@type": "HowToStep",
    "position": index + 1,
    "name": step.name,
    "text": step.text,
    ...(step.image && {
      "image": step.image
    }),
    ...(step.url && {
      "url": step.url
    })
  }))
}
---

<script type="application/ld+json" set:html={JSON.stringify(howToSchema)} />

